<ng-container *ngIf="isExpanded(); else iconMenu">
  <mat-accordion class="apa-sidenav-cloud-container">
    <mat-expansion-panel
      [expanded]="$any(currentFilter$ | async)"
    >
      <mat-expansion-panel-header>
        <mat-panel-title>
            <div class="item">
                <button
                    mat-button
                    class="apa-action-button full-width"
                    [class.apa-action-button--active]="currentFilter$ | async"
                    [attr.data-automation-id]="
                        'apa-process-cloud-management-button'
                    "
                >
                    <adf-icon
                        value="adf:ic-process"
                        class="apa-filters-icon"
                    ></adf-icon>
                    <span class="apa-action-button-label">{{
                        'PROCESS_CLOUD_EXTENSION.SIDE_NAV_TITLE' | translate
                    }}</span>
                </button>
            </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="item apa-filters-title apa-filters-icon">
        <adf-icon [value]="'adf:dynamic-feed'"></adf-icon>
        <span>{{
            'PROCESS_CLOUD_EXTENSION.TASK_LIST.TASKS' | translate
        }}</span>
      </div>
      <apa-task-filters-cloud-ext></apa-task-filters-cloud-ext>

      <div class="item apa-filters-title apa-filters-icon">
        <adf-icon [value]="'adf:ic-process'"></adf-icon>
        <span>{{
            'PROCESS_CLOUD_EXTENSION.PROCESS_LIST.PROCESSES' | translate
        }}</span>
        </div>
      <apa-process-filters-ext></apa-process-filters-ext>

    </mat-expansion-panel>
  </mat-accordion>
</ng-container>

<ng-template #iconMenu>
  <button [matMenuTriggerFor]="menu" class="apa-action-button" mat-icon-button>
    <adf-icon
        value="adf:ic-process"
        class="apa-filters-icon"
    ></adf-icon>
  </button>

  <mat-menu #menu="matMenu" [overlapTrigger]="false">
    <apa-task-filters-cloud-ext></apa-task-filters-cloud-ext>
    <apa-process-filters-ext></apa-process-filters-ext>
  </mat-menu>
</ng-template>
